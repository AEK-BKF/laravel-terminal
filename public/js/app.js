(function(){!function(n,r,e){var t,o,a,i,u,_,c,s,l,m,p,f,d;return o=n("meta[name='csrf-token']").attr("content"),n.ajaxSetup({headers:{"X-CSRF-TOKEN":o}}),m=["artisan tinker","mysql","tinker"],a=["mysql"],n.each(Terminal.endPoints,function(r,e){return-1===n.inArray(r,m)?a.push(r):void 0}),a.sort(),p=function(){var r,e;return e=["help","clear"].concat(a),e.sort(),r=[],n.each(e,function(n,e){return r.push(_(e))}),t("Available commands:")+" "+r.join(", ")},s=function(n,r){return n=n.replace("[","&#91;").replace("]","&#93;"),"[[;"+r+";]"+n+"]"},_=function(n){return s(n,"#008400")},t=function(n){return s(n,"#a50")},u={copyright:[" __                        _    _____              _         _ ","|  |   ___ ___ ___ _ _ ___| |  |_   ____ ___ _____|_|___ ___| |","|  |__| .'|  _| .'| | | -_| |    | || -_|  _|     | |   | .'| |","|_____|__,|_| |__,|\\_/|___|_|    |_||___|_| |_|_|_|_|_|_|__,|_|","","Copyright (c) 2015 Recca Tsai <http://phpwrite.blogspot.tw/>","","","","Type a command, or type `"+_("help")+"`, for a list of commands.","",""+p(),""].join("\n"),production:["",t("**************************************"),t("*     Application In Production!     *"),t("**************************************"),""].join("\n")},l=function(){var r;return r={},function(e,t,o,a){return r[e]=r[e]||0,t.pause(),n.ajax({url:e,dataType:"json",type:"post",data:{jsonrpc:"2.0",method:o,params:a,id:++r[e]}}).success(function(n){return n.result===!1?t.error(n.error):t.echo(n.result)}).error(function(n,r,e){return t.error(e)}).complete(function(){return t.resume()})}}(),d=function(){var r;return r=function(n){switch(n.toLowerCase()){case"y":case"yes":return!0;default:return!1}},function(e,t,o){var a;return null==t&&(t=""),null==o&&(o=">"),a=n.Deferred(),""!==t&&e.echo(t),e.echo(o+"\n>"),e.push(function(n){a.resolve(r(n)),e.pop()},{prompt:""}),a.promise()}}(),f=function(n,r){return 0===n.indexOf(r)},c=function(n,r,e,t){return null==e&&(e=function(){}),t||(t=n),r.push(function(n){return e(t,n,r),!1},{prompt:t+">"}),!1},i=function(r,e){var o,a,i;return o=Terminal.endPoints[r.name],i=r.args,a=i.shift()||[],"artisan"===r.name&&"production"===Terminal.environment&&-1===n.inArray("--force",i)&&(f(a,"migrate")===!0&&f(a,"migrate:status")===!1||f(a,"db:seed")===!0)?void d(e,""+u.production,_("Do you really wish to run this command? [y/N] (yes/no)")+" &#91;"+t("no")+"&#93;: ").done(function(n){return n===!0?(i.push("--force"),l(o,e,a,i)):e.echo("\n"+t("Command Cancelled!"))}):void l(o,e,a,i)},n(e.body).terminal(function(r,e){var t;switch(r){case"help":e.echo(" "),e.echo(p()),e.echo(" ");break;case"":break;case"mysql":c(r,e,function(n,r,e){var t;return t=Terminal.endPoints[n],l(t,e,r,[])});break;case"artisan tinker":c(r,e,function(n,r,e){var t;return t=Terminal.endPoints[n],l(t,e,r,[])},"tinker");break;default:t=n.terminal.parseCommand(r.trim()),-1!==n.inArray(t.name,a)?i(t,e):e.error("Command '"+r+"' Not Found!")}},{greetings:u.copyright,onBlur:function(){return!1}})}(jQuery,window,document)}).call(this);