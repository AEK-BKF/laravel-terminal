(function(){!function(n,r,e){var t,o,a,i,u,_,c,s,l,p,m,f,d,h;return a=n("meta[name='csrf-token']").attr("content"),n.ajaxSetup({headers:{"X-CSRF-TOKEN":a}}),m=["artisan tinker","mysql","tinker"],i=["mysql"],n.each(Terminal.endPoints,function(r,e){return-1===n.inArray(r,m)?i.push(r):void 0}),i.sort(),f=function(){var r,e;return e=["help","clear"].concat(i),e.sort(),r=[],n.each(e,function(n,e){return r.push(c(e))}),o("Available commands:")+" "+r.join(", ")},l=function(n,r){return n=n.replace(/&/g,"&amp;").replace(/\[/g,"&#91;").replace(/\]/g,"&#93;"),"[[;"+r+";]"+n+"]"},c=function(n){return l(n,"#008400")},o=function(n){return l(n,"#a50")},t=function(){var n,r,e,t;return n=["/","|","\\","-"],t=null,e=50,r=null,{show:function(o){var a;return o.disable(),r=o.get_prompt(),a=0,t=setInterval(function(){return o.set_prompt(n[a++]),a>n.length-1?a=0:void 0},e)},hide:function(n){return clearInterval(t),n.enable(),n.set_prompt(r)}}}(),_={copyright:[" __                        _    _____              _         _ ","|  |   ___ ___ ___ _ _ ___| |  |_   ____ ___ _____|_|___ ___| |","|  |__| .'|  _| .'| | | -_| |    | || -_|  _|     | |   | .'| |","|_____|__,|_| |__,|\\_/|___|_|    |_||___|_| |_|_|_|_|_|_|__,|_|","","Copyright (c) 2015 Recca Tsai <http://phpwrite.blogspot.tw/>","","","","Type a command, or type `"+c("help")+"`, for a list of commands.","",""+f(),""].join("\n"),production:["",o("**************************************"),o("*     Application In Production!     *"),o("**************************************"),""].join("\n")},p=function(){var r;return r={},function(e,o,a,i){return r[e]=r[e]||0,t.show(o),n.ajax({url:e,dataType:"json",type:"post",data:{jsonrpc:"2.0",method:a,params:i,id:++r[e]}}).success(function(n){return n.result===!1?o.error(n.error):o.echo(n.result)}).error(function(n,r,e){return o.error(e)}).complete(function(){return t.hide(o)})}}(),h=function(){var r;return r=function(n){switch(n.toLowerCase()){case"y":case"yes":return!0;default:return!1}},function(e,t,o){var a;return null==t&&(t=""),null==o&&(o=">"),a=n.Deferred(),""!==t&&e.echo(t),e.echo(""+o),e.push(function(n){a.resolve(r(n)),e.pop()},{prompt:">"}),a.promise()}}(),d=function(n,r){return 0===n.indexOf(r)},s=function(n,r,e,t){return null==e&&(e=function(){}),t||(t=n),r.push(function(n){return e(t,n,r),!1},{prompt:t+">"}),!1},u=function(r,e){var t,a,i;return t=Terminal.endPoints[r.name],i=r.args,a=i.shift()||[],"artisan"===r.name&&"production"===Terminal.environment&&-1===n.inArray("--force",i)&&(d(a,"migrate")===!0&&d(a,"migrate:status")===!1||d(a,"db:seed")===!0)?void h(e,""+_.production,c("Do you really wish to run this command? [y/N] (yes/no)")+" &#91;"+o("no")+"&#93;: ").done(function(n){return n===!0?(i.push("--force"),p(t,e,a,i)):e.echo("\n"+o("Command Cancelled!")+"\n")}):void p(t,e,a,i)},n(e.body).terminal(function(e,t){var o;switch(e){case"help":t.echo(" "),t.echo(f()),t.echo(" ");break;case"test":r.term=t;break;case"":break;case"mysql":s(e,t,function(n,r,e){var t;return t=Terminal.endPoints[n],p(t,e,r,[])});break;case"artisan tinker":s(e,t,function(n,r,e){var t;return t=Terminal.endPoints[n],p(t,e,r,[])},"tinker");break;default:o=n.terminal.parseCommand(e.trim()),-1!==n.inArray(o.name,i)?u(o,t):t.error("Command '"+e+"' Not Found!")}},{greetings:_.copyright,onBlur:function(){return!1}})}(jQuery,window,document)}).call(this);